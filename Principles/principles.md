## 计算机网络体系结构

### 计算机网络及其分类
- 计算机网络是一批独立自治的计算机系统的互连集合体
- 两级结构的计算机网络由资源子网(用户子网)和通信子网组成
	- 资源子网：服务器、客户计算机
	- 通信子网：通信线路(信道)、网络互联设备(路由器、交换机、HUB...)
	- Note：“子网”由两种含义
		- 物理网络的一部分，例如通信子网是通信线路和网络设备的集合。
		- 与网络编址有关
- 计算机网络按照规模分类
	- 个域网络（Personal Area Networks - PAN）
	- 局域网络（Local Area Networks - LAN）主要采用广播式通信
	- 城域网络（Metropolitan Area Networks - MAN）主要采用交换式通信
	- 广域网络（Wide Area Networks - WAN）主要采用交换式通信
	
### 计算机网络体系结构
- 计算机网络体系结构：对计算机网络及其部件所完成功能的比较精确的定义，即从功能的角度描述计算机网络的结构，是层次和层间关系的集合
- 计算机网络的基本功能是为地理位置不同的计算机用户之间提供访问通路。一般人们采用“层次结构”的方法来描述计算机网络，即：计算机网络中提供的功能是分成层次的
- 协议和协议的分层结构
	- 协议（Protocol）： 计算机网络同等层次中，通信双方进行信息交换时必须遵守的规则
	- 服务：同一实体上下层间交换信息时必须遵守的规则
	- 协议的组成
		- 语法（syntax）：以二进制形式表示的命令和相应的结构
		- 语义（semantics）：由发出的命令请求，完成的动作和回送的响应组成的集合
		- 定时关系（timing）：有关事件顺序的说明
	- 相邻层之间都有一个接口（Interface），它定义了下层向上层提供的原语操作和服务，对于第N层协议来说，它有如下特性：
		- 不知道上、下层的内部结构
		- 独立完成某种功能
		- 为上层提供服务
		- 使用下层提供的服务
	- 服务分类
		- 面向连接的服务：当使用服务传输数据时，首先建立连接，然后使用该连接传送数据，使用完后关闭连接。顺序性好
		- 无连接服务：直接使用服务传送数据，每个包独立进行路由选择。顺序性差
		- 连接并不意味着可靠，可靠要通过确认、重传等机制来保证。
	- 服务原语：服务在形式上是由一组接口原语（或操作）来描述的，服务原语可以分为四种类型--请求、指示、响应、确认


#### OSI参考模型
- 1983年ISO(国际标准化组织)的OSI(开放系统互联)模型
- OSI 七层模型
	- 物理层(The Physical Layer):在物理线路上传输原始的二进制数据位(基本网络硬件)
	- 数据链路层(The Data Link Layer):在有差错的物理线路上提供无差错的数据传输(Frame)
	- 网络层(The Network Layer):控制通信子网提供源点到目的点的数据传送(Packet)
	- 传输层(The Transport Layer):为用户提供端到端的数据传送服务
	- 会话层(The Session Layer):为用户提供会话控制服务(安全认证)
	- 表示层(The Presentation Layer):为用户提供数据转换和表示服务
	- 应用层(The Application Layer)
![OSI](https://github.com/DBullet/learn-git/blob/DBullet-patch-1/readme1/OSI.png)

#### TCP/IP参考模型
- 以TCP/IP为核心的Internet网络体系结构
	- TCP/IP参考模型把物理层和数据链路层合起来称为“主机到网络(Host-to-Network)”
	- Internet层(网络层):控制通信子网提供源点到目的点的IP包传送，实现异构网络互联
	- 传输层:提供端到端的数据传送服务(TCP/UDP)
	- 应用层:提供各种Internet管理和应用服务功能

## 物理层
- 物理层的定义：ISO/OSI关于物理层的定义：物理层提供机械的、电气的、功能的和规程的特性，目的是启动、维护和关闭数据链路实体之间比特传输的物理连接。这种连接可能通过中继系统，在中继系统内的传输也是在物理层
- 物理层的功能：在两个网络设备之间提供透明的比特流传输
- 物理层有关的传输方式
	- 连接方式（点到点、点到多点）
	- 通信方式（单工、半双工、全双工）
	- 位传输方式（串行、并行）
- 物理层的四个重要特性
	- 机械特性：主要定义物理连接的边界点，即接插装置。规定物理连接时多采用的规格、引脚的数量和排列情况
	- 电气特性：规定传输二进制位时，线路上信号的电压高低、阻抗匹配、传输速率和距离限制
	- 功能特性：主要定义各条物理线路的功能，线路的功能分为四大类（数据、控制、定时、地）
	- 规程特性：主要定义各条物理线路的工作规程和时序关系
- 传输介质：双绞线、同轴电缆、光纤...

## 数据链路层
- 数据链路层要解决的问题：如何在有差错的线路上进行无差错传输
- ISO关于数据链路层的定义：数据链路层的目的是为了提供功能和规程上的方法，以便简历、维护和释放网络实体间的数据链路
- 基本概念
	- 结点(node)：网络中的主机和网络设备(路由器、交换机等)
	- 链路(link)：通信路径上连接相邻结点的通信信道，数据链路层协议定义了一条链路的两个结点间狡猾的数据单元格式，以及结点发送和接收数据单元的动作
	- 点到点(point to point)通信：一条链路上两个相邻结点的通信
	- 端到端(end to end)通信：从源结点到目的结点的通信，通信路径可能由多个链路组成
- 数据链路层应该提供的基本功能
	- 数据在数据链路上的正常传输(建立、维护和释放)
	- 组帧：定界与同步，处理透明传输问题
	- 差错控制：检错和纠错
	- 顺序控制(可选)
	- 流量控制(可选)：基于反馈机制
- 为网络层提供的服务
	- 无确认无连接的服务：适用于误码率低的线路，错误恢复留给高层、实时业务、大部分局域网
	- 有确认无连接的服务：适用于不可靠的信道，如无线网
	- 有确认有连接的服务

### 介质访问控制(MAC)子层(Media Access Control Sublayer)
- MAC子层的功能
	- 数据帧封装、发送和接收
		- 组帧（帧定界、帧同步）
		- 寻址（源和目的MAC地址处理）
		- 差错检测
	- 介质访问管理
		- 介质分配（避免冲突）
		- 冲突解决（处理冲突）
- MAC（Media Access Control或者Medium Access Control）地址
	- 也称为物理地址或硬件地址，用来定义网络设备的位置
	- 采用16进制表示，共6个字节，48位
	- MAC地址是全网唯一的，通常一个网卡(或一台主机）有一个确定的MAC地址
	
#### 组帧
- 组帧(Framing):将比特流分成离散的帧，并计算帧的校验和
- 组帧方法：
	- 字符计数法：在帧头中用一个域来表示整个帧的字符个数。缺点：若计数出错，对本帧和后面的帧有影响
	- 带字符填充的字符定界法：起始字符 DLE STX，结束字符DLE ETX。(DLE:Data Link Escape, STX: Start of Text, ETX: End of Text, 传输字符中有定界字符则在前加DLE转义) 缺点：局限于8位字符和ASCII字符传送
	- 带位填充的标记定界法：帧的起始和结束都用一个特殊的位串“01111110”，称为标记(flag)，传输比特流中每连续5个1之后插入一个0（0比特插入删除技术）
	- 物理层编码违例法：只适用于物理层编码有冗余的网络

#### 错误检测与纠正
- 差错出现的特点：随机，连续突发（burst）
- 处理差错的两种基本策略
	- 使用纠错码：发送方在每个数据块中加入足够的冗余信息，使得接收方能够判断接收到的数据是否有错，并能纠正错误
	- 使用检错码：发送方在每个数据块中加入足够的冗余信息，使得接收方能够判断接收到的数据是否有错，但不能判断哪里有错
- 检错码与纠错码
	- 奇偶校验码：在数据后填加一个奇偶位，如偶校验，使得“1”的个数为偶数。奇偶校验可以用来检查奇数个错误
	- 循环冗余校验码(CRC)(广泛使用)
	- 海明纠错码

#### 信道分配
- 解决信道争用的协议称为介质访问控制协议 MAC (Medium Access Control)，是数据链路层协议的一部分，解决信道分配的方法分为静态分配和动态分配两种
- 静态分配：频分复用(FDM)、时分复用(TDM)、波分复用(WDM)、码分复用(CDM)
- 动态分配--多路访问协议
	- ALOHA协议
		- 纯ALOHA协议
			- 用户有数据要发送时，可以直接发至信道；然后监听信道看是否产生冲突，若产生冲突，则等待一段随机的时间重发
			- 多用户共享单一信道，并由此产生冲突，这样的系统称为竞争系统
			- 信道利用率最高只有18.4%
		- 分槽ALOHA协议
			- 把信道时间分成离散的时间槽，槽长为一个帧所需的发送时间。每个站点只能在时槽开始时才允许发送。其他过程与纯ALOHA协议相同
			- 与纯ALOHA协议相比，降低了产生冲突的概率，信道利用率最高为36.8%
	- 载波监听多路访问协议CSMA，站点在为发送帧而访问传输信道之前，首先监听信道有无载波若有载波，说明已有用户在使用信道，则不发送帧以避免冲突
		- 1-persistent CSMA
			- 若站点有数据发送，先监听信道；若站点发现信道空闲，则发送；若信道忙，则继续监听直至发现信道空闲，然后完成发送；若产生冲突，等待一随机时间，然后重新开始发送过程
			- 减少了信道空闲时间，增加了发生冲突的概率
		- 非坚持型CSMA(nonpersistent CSMA)
			- 若站点有数据发送，先监听信道；若站点发现信道空闲，则发送；若信道忙，等待一随机时间，然后重新开始发送过程；若产生冲突，等待一随机时间，然后重新开始发送过程
			- 减少了冲突的概率，增加了信道空闲时间，数据发送延迟增大。随着每个帧时发送帧数量的增加，非坚持型CSMA信道效率比 1-坚持CSMA高，传输延迟比 1-坚持CSMA大
		- p-persistent CSMA
			- 适用于分槽信道
			- 若站点有数据发送，先监听信道；若站点发现信道空闲，则以概率p发送数据，以概率q =1- p 延迟至下一个时槽发送。若下一个时槽仍空闲，重复此过程，直至数据发出或时槽被其他站点所占用；若信道忙，则等待下一个时槽，重新开始发送；若产生冲突，等待一随机时间，然后重新开始发送
		- 带冲突检测的载波监听多路访问协议CSMA/CD
			- 引入原因：当两个帧发生冲突时，两个被损坏帧继续传送毫无意义，而且信道无法被其他站点使用，浪费信道；如果站点边发送边监听，并在监听到冲突之后立即停止发送，可以提高信道的利用率，因此产生了CSMA/CD
			- 站点使用CSMA协议进行数据发送；在发送期间如果检测到冲突，立即终止发送，并发出一个瞬间干扰信号，使所有的站点都知道发生了冲突；在发出干扰信号后，等待一段随机时间，再新开始发送
			- 一个站点确定发生冲突最坏情况下要花2倍电缆传输时间
![CSMA](https://github.com/DBullet/learn-git/blob/DBullet-patch-1/readme1/dl1.png)
	- 无冲突协议
		- 基本位图协议（A Bit-Map Protocol）
			- 共享信道上有N个站，竞争周期分为N个时槽，如果一个站有帧发送，则在对应的时槽内发送比特1；N个时槽之后，每个站都知道哪个站要发送帧，这时按站序号发送
			- 这样在实际发送信息前先广播发送请求的协议称为预留协议
			- 与站序号有关的不平等性，序号大的站得到的服务好；每个站都有 1 比特的开销
			- 缺点：与站序号有关的不平等性，序号大的站得到的服务好；每个站都有 1 比特的开销
		- 二进制计数法（Binary Countdown）
			- 所有站的地址用等长二进制位串表示，若要占用信道，则广播该位串；不同站发的地址中的位做“或”操作，一旦某站了解到比本站地址高位更高的位置被置为“1”，便放弃发送请求
	- 有限竞争协议
		- 竞争方法(如ALOHA，CSMA)轻负载下，发送延迟小；重负载下，信道效率低；无冲突协议，轻负载下，发送延迟大；重负载下，信道效率高
		- 有限竞争方法：结合竞争和无冲突两种方法，轻负载下使用竞争，重负载下使用无冲突方法；减少竞争的站的数目可以增加获取信道的概率；基本思路：将站分组，组内竞争
		- 适应树搜索协议
			- 站点组织成二叉树
			- 一次成功传输之后，第0槽全部站可竞争信道，只有一个站要使用信道则发送；有冲突则在第1槽内半数站（2以下站）参与竞争。如其中之一获得信道，本帧后的时槽留给3以下的站；如发生冲突，继续折半搜索
			- 当系统负载很重时，从根结点开始竞争发生冲突的概率非常大。为提高效率，可以从中间结点开始竞争
![适应树搜索协议](https://github.com/DBullet/learn-git/blob/DBullet-patch-1/readme1/dl2.png)

### 逻辑链路控制(LLC)子层(Logical Link Control Sublayer)
- 引入LLC子层的原因：
	- MAC子层只提供尽力而为的数据报服务，不提供确认机制和流量控制（滑动窗口）
	- 有些情况下，这种服务足够，如支持IP协议；当需要确认和流控的时候，这种服务就不能满足，需要LLC
	- 对于同一个LLC，可以提供多个MAC选择

#### 滑动窗口协议
- 滑动窗口协议通过确认和重传机制提供可靠服务，既可以在链路层实现，也可以在传输层实现。对于误码率较低的链路，链路层可以不实现可靠传输服务
- 滑动窗口协议工作原理
	- 发送的信息帧都有一个序号，从0到某个最大值，0 ~ 2n - 1，一般用n个二进制位表示
	- 发送端始终保持一个已发送但尚未确认的帧的序号表，称为发送窗口。发送窗口的上界表示要发送的下一个帧的序号，下界表示未得到确认的帧的最小序号。发送窗口大小 = 上界 - 下界，大小可变
	- 发送端每发送一个帧，序号取上界值，上界加1；每接收到一个确认序号＝发送窗口下界的正确响应帧，下界加1；若确认序号落在发送窗口之内，则发送窗口下界连续加1，直到发送窗口下界＝确认序号＋1（累计确认）
	- 接收端有一个接收窗口，大小固定，但不一定与发送窗口相同。接收窗口的上界表示允许接收的最大序号，下界表示希望接收的序号
	- 接收窗口容纳允许接收的信息帧，落在窗口外的帧均被丢弃。序号等于下界的帧被正确接收，并产生一个响应帧，上界、下界都加1。接收窗口大小不变
- 1bit滑动窗口协议
- 退后N帧重传协议
- 选择重传协议

### 局域网技术
- 局域网是一种将小区域内的各种通信设备互连在一起的通信网络
- IEEE 802系列标准定义了若干种LAN，包括对物理层、MAC子层的定义和描述。它的组成如下：
	- 802.1 基本介绍和接口原语定义
	- 802.2 逻辑链路控制（LLC）子层
	- 802.3 采用CSMA/CD技术的局域网(以太网)
	- 802.4 采用令牌总线（Token Bus）技术的局域网
	- 802.5 采用令牌环（Token Ring）技术的局域网
	- …
- 局域网的基本特点
	- 高传输率（10 Mbps ~ 100 Gbps）
	- 短距离（0.1 km ~ 10 km）
	- 低出错率（10^-8 ~ 10^-11）
- 局域网发展趋势
	- 高速，100G Ethernet(以太网)
	- 无线，无线局域网 IEEE 802.11
- 无线局域网(WLAN)的MAC
	- 无线局域网与有线局域网不同
		- 隐藏站点问题：由于站点距离竞争者太远，从而不能发现潜在介质竞争者的问题称为隐藏站点问题
![隐藏站点问题](https://github.com/DBullet/learn-git/blob/DBullet-patch-1/readme1/lan1.png)
		- 暴露站点问题：由于非竞争者距离发送站点太近，从而导致介质非竞争者不能发送数据的问题称为暴露站点问题
![暴露站点问题](https://github.com/DBullet/learn-git/blob/DBullet-patch-1/readme1/lan2.png)
	- MACA（Multiple Access with Collision Avoidance）
		- 是IEEE 802.11无线局域网标准的基础
		- 基本思想：发送站点刺激接收站点发送应答短帧，从而使得接收站点周围的站点监听到该帧，并在一定时间内避免发送数据
		- 基本过程
			1. A向B发送RTS(Request To Send)帧，A周围的站点在一定时间内不发送数据，以保证CTS帧返回给A
			2. B向A回答CTS(Clear To Send)帧，B周围的站点在一定时间内不发送数据，以保证A发送完数据
			3. A开始发送
			4. 若发生冲突，采用二进制指数后退算法等待随机时间，再重新开始
		- 二进制指数后退算法（binary exponential backoff）
			1. 将冲突发生后的时间划分为长度为51.2微秒的时槽
			2. 发生第一次冲突后，各个站点等待 0 或 1 个时槽再开始重传；
			3. 发生第二次冲突后，各个站点随机地选择等待0,1, 2或3个时槽再开始重传；
			4. 第 i 次冲突后，在 0 至 2i-1 间随机地选择一个等待的时槽数，再开始重传；
			5. 10次冲突后，选择等待的时槽数固定在0至210-1间；
			6. 16次冲突后，发送失败，报告上层
![MACA](https://github.com/DBullet/learn-git/blob/DBullet-patch-1/readme1/lan3.png)
- 802.5令牌环
	- 环实际上并不是一个广播介质，而是不同的点到点链路组成的环，点到点链路有很多技术优势
	- 各个站点是公平的，获得信道的时间有上限，避免冲突发生
	- 基本思想
		- 令牌（Token）是一种特殊的比特组合模式，一个站要发送帧时，需要抓住令牌，并将其移出环
		- 环本身必须有足够的时延容纳一个完整的令牌，时延由两部分组成：每站的1比特延迟和信号传播延迟。对于短环，必要时需要插入人工延迟
		- 环接口有两种操作模式：监听模式和传输模式
		- 当一个站点有数据发送时，在令牌通过此站点时，将令牌从环上取下，发送自己的数据，发送站负责将发出的帧从环上移去，然后重新生成令牌，并转入监听模式
- 网桥技术
	- 网桥（bridge）是工作在数据链路层的一种网络互连设备，它在互连的LAN之间实现帧的存储和转发
	- 网桥工作原理：连接k个不同LAN的网桥具有k个MAC子层和k个物理层
	- 为什么使用网桥
		- 将一个负载很重的大LAN分隔成使用网桥互连的几个LAN以减轻负担，防止出故障的站点损害全网
			- 冲突域：在使用CSMA/CD协议的以太网中，如果两个站点同时发送帧会产生冲突，则这个CSMA/CD网络就是一个冲突域
			- 中继器不能隔离冲突域，网桥/交换机可以隔离冲突域
		- 网桥可以互连不同类型的LAN
		- 网桥可以有助于安全保密
	- 网桥工作过程
		- 网桥工作在混杂（promiscuous）方式，接收所有的帧
		- 网桥接收到一帧后，通过查询地址/端口对应表来确定是丢弃还是转发
		- 网桥刚启动时，地址/端口对应表为空，采用洪泛（flooding）方法转发帧
		- 在转发过程中采用逆向学习(backward learning)算法收集MAC地址。网桥通过分析帧的源MAC地址得到MAC地址与端口的对应关系,并写入地址/端口对应表
		- 网桥软件对地址/端口对应表进行不断的更新，并定时检查，删除在一段时间内没有更新的地址/端口项
	- 帧的路由过程
		- 目的LAN与源LAN相同，则丢弃帧
		- 目的LAN与源LAN不同，则转发帧
		- 目的LAN未知，则洪泛帧
	- 解决多个网桥产生回路的问题
		- 透明网桥/生成树网桥 
			- 思想：让网桥之间互相通信，用一棵连接每个LAN的生成树（Spanning Tree）覆盖实际的拓扑结构
			- 构造生成树
				- 每个桥广播自己的桥编号，号最小的桥称为生成树的根
				- 每个网桥计算自己到根的最短路径，构造出生成树，使得每个LAN和桥到根的路径最短
				- 当某个LAN或网桥发生故障时，要重新计算生成树
				- 生成树构造完后，算法继续执行以便自动发现拓扑结构变化，更新生成树
		- 源路由网桥
			- 帧的发送者知道目的主机是否在自己的LAN内，如果不在，在发出的帧头内构造一个准确的路由序列，包含要经过的网桥、LAN的编号。并将发出的帧的源地址的最高位置1
			- 每个LAN有一个12位的编号，每个网桥有一个4位的编号
			- 网桥只接收源地址的最高位为1的帧，判定是转发还是丢弃
			- 源路由的产生：每个站点通过广播“发现帧” (discovery frame)来获得到各个站点的最佳路由
			- 若目的地址未知，源站发送“发现帧”，每个网桥收到后广播，目的站收到后发应答帧，该帧经过网桥时被加上网桥的标识，源站收到后就知道了到目的站的最佳路由

## 网络层
- ISO定义：网络层为一个网络连接的两个传送实体间交换网络服务数据单元提供功能和规程的方法，它使传送实体独立于路由选择和交换的方式
- 网络层的地位
	- 位于数据链路层和传输层之间，使用数据链路层提供的服务，为传输层提供服务
	- 通信子网的最高层（传统意义）
- 网络层的功能
	- 屏蔽各种不同类型网络之间的差异，实现互连
	- 了解通信子网的拓扑结构，选择路由，实现报文的网络传输
- 为传输层提供服务
	- 面向连接服务
		- 传统电信的观点：通信子网应该提供可靠的、面向连接的服务
		- 将复杂的功能放在网络层(通信子网)
	- 无连接服务
		- 互联网的观点：通信子网无论怎么设计都是不可靠的，因此网络层只需提供无连接服务将复杂的功能放在传输层
- 网络层的内部结构
	- 数据报（datagram）子网
		- 采用数据报分组交换
		- 每个分组被独立转发，分组带有全网唯一的地址
	- 虚电路（virtual circuit）子网
		- 采用虚电路分组交换
		- 先在源结点和目的结点之间建立一条虚电路，所有分组沿虚电路按次序存储转发，最后拆除虚电路
	- 虚电路子网与数据报子网的比较
		- 带宽与状态的权衡
			- 数据报子网中，每个数据报都携带完整的目的/源地址，开销大，浪费带宽
			- 虚电路子网中，路由器需要维护虚电路的状态信息；
		- 地址查找时间与连接建立时间的权衡
			- 数据报子网对每个分组的路由查找过程复杂
			- 虚电路子网需要在建立连接时花费较长的路由查找时间
		- 可靠性与服务质量的权衡
			- 数据报不太容易保证服务质量QoS(Quality of Service) ，但是对于通信线路的故障，适应性很强 
			- 虚电路方式很容易保证服务质量，适用于实时操作，但比较脆弱
		- 可扩展性
			- 数据报子网具有更好的可扩展性

### 路由算法
- 路由算法是网络层协议的一部分
	- 通信子网采用数据报分组交换方式，每个分组都要做路由选择
	- 通信子网采用虚电路分组交换方式，只需在建立连接时做一次路由选择
- 最优化原则（optimality principle）:如果路由器 J 在路由器 I 到 K 的最优路由上，那么从J 到 K 的最优路由会落在同一路由上
- 汇集树（sink tree）
	- 从所有的源结点到一个给定的目的结点的最优路由的集合形成了一个以目的结点为根的树，称为汇集树
	- 路由算法的目的是找出并使用汇集树
- 最短路径路由算法（Shortest Path Routing）
	- 基本思想
		- 构建子网的拓扑图，图中的每个结点代表一个路由器，每条弧代表一条通信线路
		- 为了选择两个路由器间的路由，算法在图中找出最短路径
		- Dijkstra算法
	- 测量路径长度的方法
		- 结点数量（hop）
		- 信道带宽
		- 地理距离
		- 传输延迟
		- 距离、信道带宽等参数的加权函数
- 分层路由
	- 网络规模增长带来的问题
		- 路由器中的路由表增大
		- 路由器为选择路由而占用的内存、CPU时间和网络带宽增大
		- 路由收敛慢
	- 分层路由
		- 分而治之的思想
		- 根据需要，将网络分成若干域（domain）
		- 路由表规模大幅减少
	- 分层路由带来的问题
		- 分层后计算得到的路由不一定是最优路由

#### 静态路由算法
- 洪泛算法（Flooding）
	- 基本思想：把收到的每一个分组，向除了该分组到来的线路外的所有输出线路发送
	- 主要问题：洪泛要产生大量重复分组，可能产生回路（loop）
	- 解决措施：
		- 每个分组头含站点计数器，每经过一站计数器减1，为0时则丢弃该分组
		- 记录分组经过的路径
	- 选择性洪泛算法（selective flooding）：洪泛法的一种改进，将接收的每个分组仅发送到与正确方向接近的线路上
	- 算法特点：
		- 对路由器和线路的资源过于浪费，实际很少直接采用
		- 具有极好的健壮性，可用于军事应用
		- 作为衡量标准评价其它路由算法
- 基于流量的路由算法（Flow-Based Routing）
	- 基本思想：
		- 既考虑拓扑结构，又兼顾网络负载
		- 前提：每对结点间平均数据流相对稳定和可预测
		- 根据网络带宽和平均流量，可得出平均分组延迟，因此路由选择问题归结为找产生网络最小延迟的路由选择算法
		- 提前离线（off-line）计算
		- 可用于流量工程（traffic engineering）

#### 动态路由算法
- 距离向量路由算法（Distance Vector Routing）
	- 算法步骤：
		- 每个路由器维护一张表，通过与相邻路由器交换距离信息来更新表
		- 以子网中其它路由器为表的索引，表项分组括两部分：到达目的结点的最佳输出线路，和到达目的结点所需时间或距离
		- 每隔一段时间，路由器向所有邻居结点发送它到每个目的结点的距离表，同时它也接收每个邻居结点发来的距离表
		- 邻居结点X发来的表中，X到路由器i的距离为Xi，本路由器到X的距离为m，则路由器经过X到i的距离为Xi + m。根据不同邻居发来的信息，计算Xi + m，并取最小值，更新本路由器的路由表
		- 注意：本路由器中的老路由表在计算中不被使用
	- 无穷计算问题(count-to-infinity problem)：对好消息反应迅速，对坏消息反应迟钝
	- 水平分裂算法
		- 工作过程与距离向量算法相同，区别在于从邻居结点学到的到X的距离不向邻居结点报告，使得坏消息传播的也快
		- 虽然广泛使用，但有时候会失败，如：
![dv](https://github.com/DBullet/learn-git/blob/master/dv1.png)
	- 实用协议：RIP 
![dv](https://github.com/DBullet/learn-git/blob/master/dv.png)
- 链路状态路由算法（Link State Routing）
	- 距离向量路由算法的主要问题
		- 选择路由时，没有考虑链路带宽
		- 路由收敛速度慢
		- 存在无穷计算问题
		- 路由报文开销大（不是增量更新）
		- 不适合用于大规模网络（RIP协议最大支持15跳）
	- 算法步骤
		- 发现邻居结点，并学习它们的网络地址
			- 路由器启动后，通过发送HELLO分组发现邻居结点
			- 两个或多个路由器连在一个LAN时，引入人工结点（代表路由器DR, Designated Router）
		- 测量到每个邻居结点的延迟或开销
			- 一种直接的方法是：发送一个要对方立即响应的ECHO分组，往返时间除以2即为延迟
			- 另一种方法是根据带宽来设定 
		- 将所有学习到的内容封装成一个分组
			- 分组以发送方的标识符开头，后面是序号、年龄和一个邻居结点列表
			- 列表中对应每个邻居结点，都有发送方到它们的延迟或开销
			- 链路状态分组定期创建或发生重大事件时创建
		- 将这个分组发送给所有其它路由器
			- 洪泛链路状态分组，为控制洪泛，每个分组分组含一个序号，每次发送新分组时加1
			- 路由器记录信息对(源路由器，序号)，当一个链路状态分组到达时，若是新分组，则处理；若是重复分组或过时分组，则丢弃
			- 问题
				- 序号循环使用会混淆
				- 路由器崩溃后，序号重置
				- 序号出错
			- 改进
				- 第一个问题的解决办法：使用32位序号
				- 第二、三个问题的解决办法：增加年龄（age）域，每秒钟年龄减1，为零则丢弃（OSPF协议规定，age初始值为0，递增，超过MaxAge（一般为3600秒）要丢弃）
				- 链路状态分组到达后，延迟一段时间，并与其它已到达的来自同一路由器的链路状态分组比较序号，丢弃重复分组，保留新分组
				- 链路状态分组需要应答
		- 计算到所有其它路由器的最短路径
			- 根据Dijkstra算法计算最短路径
	- 实用协议：OSPF，IS-IS
- 两种路由算法的比较
	- 路由信息的复杂性
		- LS
			- 路由信息向全网发送
			- N个节点，E个链路的情况下，发送O(NE)个报文
		- DV
			- 仅在邻居节点之间交换
		- 注意
			- LS发送的是链路信息，DV发送的是到所有结点的向量信息
			- LS信息定期创建（30分钟）或发生重大事件时创建，DV定期创建（30秒钟）
			- LS发布增量信息，DV发布全部信息
	- 收敛（Convergence）速度
		- LS
			- 使用最短路径优先算法，算法复杂度为O(n**2)
			- n个结点（不分组括源结点），需要n*(n+1)/2 次比较
			- 使用更有效的实现方法，算法复杂度可以达到O(nlogn)
			- 可能存在路由振荡（oscillations）
		- DV
			- 收敛时间不确定
			- 可能会出现路由循环
			- count-to-infinity问题
	- 健壮性: 如果路由器不能正常工作会发生什么?
		- LS
			- 结点会广播错误的链路开销
			- 每个结点只计算自己的路由表
		- DV
			- 结点会广播错误的路径开销
			- 每个结点的路由表被别的结点使用，错误会传播到全网
			
### 拥塞控制算法
- 拥塞（congestion）
	- 网络上有太多的分组时，性能会下降，这种情况称为拥塞
- 拥塞产生的原因
	- 网络设备处理器性能低
	- 高速端口输入，低速端口输出
	- 多个输入对应一个输出
- 解决办法
	- 针对某个因素的解决方案，只能对提高网络性能起到一点点好处，甚至可能仅仅是转移了影响性能的瓶颈，因此需要全面考虑各个因素
	- 目前，主要在网络层和传输层（TCP）进行控制
- 拥塞控制与流控制的差别
	- 拥塞控制（congestion control）需要确保通信子网能够承载用户提交的数据流，是一个全局性问题，涉及主机、路由器等很多因素
	- 流控制（flow control）与点到点的传输有关，主要解决快速发送方与慢速接收方的问题，是局部问题，一般都是基于反馈进行控制的
- 根据控制论，拥塞控制方法分为两类
	- 开环控制
		- 通过好的设计来解决问题，避免拥塞发生
		- 拥塞控制时，不考虑网络当前状态
	- 闭环控制
		- 基于反馈机制
		- 工作过程
			- 监控系统，发现何时何地发生拥塞
			- 把发生拥塞的消息传给能采取动作的站点
			- 调整系统操作，解决问题
- 衡量网络是否拥塞的参数
	- 缺乏缓冲区造成的分组丢失率
	- 平均队列长度
	- 超时重传的分组的数目
	- 平均分组延迟
	- 分组延迟变化（Jitter）
- 反馈方法
	- 向负载发生源发送一个告警分组
	- 分组结构中保留一个位或域用来表示发生拥塞，一旦发生拥塞，路由器将所有的输出分组置位，向邻居告警
	- 主机或路由器主动地、周期性地发送探报（probe），查询是否发生拥塞
- 流量整形
	- 开环控制
	- 基本思想
		- 造成拥塞的主要原因是网络流量通常是突发性的
		- 强迫分组以一种可预测的速率发送
	- 典型算法
		- 漏桶算法
		- 令牌桶算法
	- 漏桶算法(Leaky Bucket)
![leaky-bucket](https://github.com/DBullet/learn-git/blob/DBullet-patch-1/readme1/leaky-bucket.png)
		- 将用户发出的不平滑的数据分组流转变成网络中平滑的数据分组流
		- 可用于固定分组长的协议，如ATM；也可用于可变分组长的协议，如IP，使用字节计数
		- 无论负载突发性如何，漏桶算法强迫输出按平均速率进行，不灵活
	- 令牌桶算法(Token Bucket)
		- 漏桶算法不够灵活，因此加入令牌机制
		- 基本思想：漏桶存放令牌，每T秒产生一个令牌，令牌累积到超过漏桶上界时就不再增加。分组传输之前必须获得一个令牌，传输之后删除该令牌
	- 漏桶算法与令牌桶算法的区别
		- 流量整形策略不同
			- 漏桶算法不允许空闲主机积累发送权，以便以后发送大的突发数据
			- 令牌桶算法允许空闲主机积累发送权，最大为桶的大小
		- 漏桶维护策略不同
			- 漏桶算法中，漏桶存放的是数据分组，桶满了丢弃数据分组
			- 令牌桶算法中，漏桶存放的是令牌，桶满了丢弃令牌
- 虚电路子网中的拥塞控制
	- 流说明(Flow Specification)
		- 一个数据流的发送方、接收方和通信子网三方认可的、描述发送数据流的模式和希望得到的服务质量的数据结构，称为流说明
		- 对发送方的流说明，子网和接收方可以做出三种答复：同意、拒绝、其它建议
	- 准入控制（admission control）
		- 根据流说明和网络资源分配情况，进行准入控制
		- 一旦发生拥塞，在问题解决之前，不允许建立新的虚电路
		- 另一种方法是发生拥塞后可以建立新的虚电路，但要绕开发生拥塞的地区
	- 资源预留：建立虚电路时，主机与子网达成协议，子网根据协议在虚电路上为此连接预留资源
- 抑制分组(Choke Packets)
	- 基本思想
		- 路由器监控输出线路及其它资源的利用情况，超过某个阈值，则此资源进入警戒状态
		- 每个新分组到来，检查它的输出线路是否处于警戒状态
		- 若是，则向源主机发送抑制分组，分组中指出发生拥塞的目的地址。同时将原分组打上标记（为了以后不再产生抑制分组），正常转发
		- 源主机收到抑制分组后，按一定比例减少发向特定目的地的流量，并在固定时间间隔内忽略指示同一目的地的抑制分组。然后开始监听，若此线路仍然拥塞，则主机在固定时间内减轻负载、忽略抑制分组；若在监听周期内没有收到抑制分组，则增加负载
		- 通常采用的流量增减策略是：减少时，按一定比例减少，保证快速解除拥塞；增加时，以常量增加，防止很快导致拥塞(AIMD)
	- 逐跳抑制分组(Hop-by-Hop Choke Packets)
		- 在高速、长距离的网络中，由于源主机响应太慢，抑制分组算法对拥塞控制的效果并不好，可采用逐跳抑制分组算法
		- 基本思想
			- 抑制分组对它经过的每个路由器都起作用
			- 能够迅速缓解发生拥塞处的拥塞
			- 上游路由器要求有更多的缓冲区
- 公平队列算法（Fair Queueing）
	- 路由器的每个输出线路有多个队列
	- 路由器循环扫描各个队列，发送队头的分组
	- 所有队列具有相同优先级
	- 一些ATM交换机、路由器使用这种算法
	- 一种改进：对于变长分组，由逐分组轮讯改为逐字节轮讯
	- 加权公平队列（Weighted Fair Queueing）
		- 给不同队列以不同的优先级
		- 优先级高的队列在一个轮询周期内获得更多的时间片
- 负载丢弃(Load Shedding)
	- 上述算法都不能消除拥塞时，路由器只得将分组丢弃
	- 针对不同服务，可采取不同丢弃策略
		- 文件传输，优先丢弃新分组，wine策略
		- 多媒体服务，优先丢弃旧分组，milk策略
	- 早期丢弃分组，会减少拥塞发生的概率，提高网络性能

### 网络互联
- 互连网络（internet）：两个或多个网络构成互连网络
- 多种不同网络（协议）存在的原因
	- 历史原因：不同公司的网络产品大量使用
	- 价格原因：网络产品价格低，更多的人有权决定使用何种网络
	- 技术原因：不同网络采用不同技术、不同硬件、不同协议
- 网络互连设备
	- 中继器（repeater）
		- 物理层设备，在电缆段之间拷贝比特
		- 对弱信号进行放大或再生，以便延长传输距离
	- 网桥（bridge）
		- 数据链路层设备，在局域网之间存储转发帧
		- 网桥可以改变帧格式
	- 多协议路由器（multiprotocol router）
		- 网络层设备，在网络之间存储转发分组
		- 必要时，做网络层协议转换
	- 传输网关（transport gateway）
		- 传输层设备，在传输层转发字节流
	- 应用网关（application gateway）
		- 应用层设备，在应用层实现互连
- 隧道技术：源和目的主机所在网络类型相同，连接它们的是一个不同类型的网络，这种情况下可以采用隧道技术
![隧道技术](https://github.com/DBullet/learn-git/blob/master/suidao.png)
- 互连网络路由
	- 互连网络路由工作过程
		- 互连网络的路由与单独子网的路由过程相似，只是复杂性增加
	- 两级路由算法
		- 自治系统AS
		- 内部网关协议IGP：RIP，OSPF
		- 外部网关协议EGP：BGP
- 分片(Fragmentation)
	- 每种网络都对最大分组长度有限制，有以下原因
		- 硬件，例如 TDM 的时槽限制
		- 操作系统
		- 协议，例如分组长度域的比特个数
		- 与标准的兼容性
		- 希望减少传输出错的概率
		- 希望避免一个分组占用信道时间过长
	- 大分组经过小分组网络时，网关要将大分组分成若干片段（fragment），每个片段作为独立的分组传输
	- 分片重组策略
		- 分片重组过程对其它网络透明
			- 网关将大分组分片后，每个片段都要经过同一出口网关，并在那里重组
			- 带来的问题
				- 出口网关需要知道何时所有片段都到齐
				- 所有片段必须从同一出口网关离开
				- 大分组经过一系列小分组网络时，需要反复分片重组，开销大
		- 分片重组过程对其它网络不透明
			- 中间网关不做重组，而由目的主机做
			- 带来的问题
				- 对主机要求高，能够重组
				- 每个片段都要有一个分组头，网络开销增大
- 防火墙(Firewall)
	- 什么情况下使用防火墙？
		为防止网络中的信息泄露出去或不好的信息渗透进来，在网络边缘设置防火墙
	- 防火墙的一种早期配置
		- 两个路由器，根据某种规则表，进行分组过滤
		- 一个应用网关，审查应用层信息

### 网络层协议
- 在网络层，互联网可以看成是自治系统的集合，是由网络组成的网络
- 网络之间互连的纽带是IP（Internet Protocol）协议
- IP协议，ICMP协议，ARP协议，RARP协议，RIP协议，OSPF协议，BGP协议...

#### IP协议
- IP头格式
![IP Header](https://github.com/DBullet/learn-git/blob/master/IP.png)
	- IP头包括20个字节的固定部分和变长（最长40字节）的可选部分，从左到右传输
		- 版本域（version）
		- IP分组头长度
		- 服务类型域
		- 总长度域
		- 标识域
		- DF：Don’t Fragment
			所有机器必须能够接收小于等于576字节的片段
		- MF：More Fragments	
			除最后一个片段外的所有片段都要置MF位
		- 片段偏移量（Fragment offset）
			除最后一个片段外的所有片段的长度必须是8字节的倍数
		- 生存期（TTL）
		- 协议域（Protocol）
		- 头校验和（Header checksum）
		- 源地址(Source address)和目的地址(Destination address)
- IP地址
	- 地址组成：网络号 + 主机号（IPv4地址共32bit）
	- 有类地址划分(classful addressing)
	- 地址表示采用用点分隔的十进制表示法
		例如166.111.68.3
	- 全0和全1有特殊含义
		- 全0：表示本网络或本主机
		- 全1：表示广播地址
	- 无类域间路由CIDR 
		- CIDR（Classless Inter Domain Routing）的提出
			- Internet指数增长，IPv4地址已经分配完毕
			- 基于分类的IP地址空间的组织浪费了大量的地址，罪魁祸首是B类地址
		- 基本思想：将剩余的C类地址分成大小可变的地址空间
		- 目前单播地址都采用CIDR
		- 路由表中增加一个32位的掩码（mask）域
		- 最长前缀匹配原则：路由查找时，若多个路由表项匹配成功，选择掩码最长（1比特数多）的路由表项
		- CIDR思想可用于所有IP地址，没有A、B、C类之分。
		- 地址格式：a.b.c.d/x，其中x 地址中网络号的位数

#### IPv6
- IPv6的提出
	- CIDR仅仅是一种临时补救措施，不能从根本上解决IP地址空间匮乏的问题
	- 移动电话、家电上网需要大量的IP地址
	- IPv6与IPv4不兼容，但与其它Internet协议兼容，如TCP、UDP、OSPF、BGP、DNS等，但实际上还是需要开发另外一套协议栈
- IPv6的目标
	- 即使在不能有效分配地址空间的情况下，也能支持数十亿的主机
	- 减少路由表的大小
	- 简化协议，使得路由器能够更快的处理分组
	- 提供比IPv4更好的安全性
	- 更多的关注服务类型，特别是实时数据
	- 支持Multicast
	- 支持移动功能
	- 协议具有很好的可扩展性
	- 增强安全性
	- 在一段时间内，允许IPv4与IPv6共存
- 与IPv4相比，IPv6的主要变化
	- 地址变长，由32位变成128位
	- IP头简化，由13个域减少为7个域，提高路由器处理速度
	- 由于IPv6分组头定长，取消IHL域
	- Protocol域取消，用Next header域表示
	- 取消与分片有关的域，IPv6的分片方法：所有主机和路由器必须支持1280字节的分组，当主机发送一个大分组时，路由器不做分片，而是给主机发一个错误信息，由主机做分片
	- 取消Checksum域
	- 更好的支持选项功能
	- 安全性提高
- IPv6地址表示
	- 16字节地址表示成用冒号（:）隔开的8组，每组4个16进制位，例如，
		8000:0000:0000:0000:0123:4567:89AB:CDEF
	- 由于有很多“0”，有三种优化表示
	- 打头的“0”可以省略，0123可以写成123
	- 一组或多组16个“0”可以被一对冒号替代，但是一对冒号只能出现一次。上面的地址可以表示成8000::123: 4567:89AB:CDEF
	- IPv4地址可以写成一对冒号和用“.”分隔的十进制数，例如::192.31.20.46

## 传输层
- 引入传输层的原因
	- 消除网络层的不可靠性
	- 提供从源端主机的进程到目的端主机的进程的可靠的、与实际使用的网络无关的数据传输
- 传输服务
	- 传输实体（transport entity）：完成传输层功能的硬软件
	- 传输层实体利用网络层提供的服务向上层提供有效、可靠或尽力而为的服务
	- 传输层提供两种服务
		- 面向连接的传输服务：连接建立，数据传输，连接释放
		- 无连接的传输服务
	- 1 ~ 4层称为传输服务提供者（transport service provider），4层以上称为传输服务用户（transport service user）
- 传输层寻址
	- 寻址（Addressing）方法：定义传输服务访问点TSAP（Transport Service Access Point），将应用进程与这些TSAP相连。
	- 在互联网中，TSAP为(IP address, local port)
- 连接管理
	- 建立连接
		- 网络可能丢失、重复包，特别是延迟重复包的存在，导致传输层建立连接的复杂性
		- 两次握手不能满足要求
			- 两次握手：A发出连接请求CR TPDU，B发回连接确认CC TPDU
			- 失败的原因：网络层会丢失、存储和重复包
		- 解决延迟重复包的关键是丢弃过时的包
		- 采用三次握手
	- 三次握手（three-way handshake）
		- A 发出序号为X的CR TPDU
		- B 发出序号为Y的CC TPDU，并确认A的序号为X的CR TPDU
		- A 发出序号为X+1的第一个数据TPDU，并确认B的序号为Y的CR TPDU
		- 三次握手方案解决了由于网络层会丢失、存储和重复包带来的问题
![三次握手](https://github.com/DBullet/learn-git/blob/DBullet-patch-1/readme1/tcp1.png)
	- 释放连接
		- 非对称式：一方释放连接，双向连接断开，存在丢失数据的危险
		- 对称式：每个方向的连接单独关闭，不会丢失数据，但是存在两军问题。可以证明不存在安全的通过N次握手实现对称式连接释放的方法。(对确认进行确认是无穷尽的)
![Two Army](https://github.com/DBullet/learn-git/blob/DBullet-patch-1/readme1/twoarmy.png)
		- 在实际的通信过程中，使用三次握手 + 定时器的方法释放连接在绝大多数情况下是成功的。
![三次握手 + 定时器](https://github.com/DBullet/learn-git/blob/DBullet-patch-1/readme1/4.png) 
		- “四次挥手”的说法是把对第一次DR(Drop Request)的响应也算作一次挥手
![四次挥手](https://my-1255788407.cos.ap-shanghai.myqcloud.com/tcp_close.png)

#### 互联网传输协议
- 传输控制协议TCP（Transmission Control Protocol）
	- 面向连接的、可靠的、端到端的、基于字节流的传输协议
	- 应用程序访问TCP服务是通过在收发双方创建套接字来实现的
	- 套接字地址用（IP地址，端口号）来表示，256以下的端口号被标准服务保留，例如FTP（21），TELNET（23）
	- 每条连接用(套接字1,套接字2)来表示，是点到点的全双工通道
	- TCP不支持组播（multicast）和广播（broadcast）
	- TCP连接是基于字节流的，而非消息流，消息的边界在端到端的传输中不能得到保留
![TCP Header](https://github.com/DBullet/learn-git/blob/DBullet-patch-1/readme1/tcp%20header.png) 
- TCP协议需要解决的主要问题
	- 连接管理
		- 建立连接：三次握手
		- 释放连接：三次握手 + 定时器
	- 可靠传输
		- 滑动窗口
	- 流控制和拥塞控制
		- 可变滑动窗口
		- 慢启动（slow start）、拥塞避免（congestion avoidance）…
- TCP拥塞控制
	- 导致网络拥塞的两个潜在因素是：网络转发能力和接收方接收能力
	- 出现拥塞的两种情况
		- 快网络小缓存接收者
		- 慢网络大缓存接收者
	- TCP处理第一种拥塞的措施
		- 在连接建立时声明最大可接收段长度
		- 利用可变滑动窗口协议防止出现拥塞
	- TCP处理第二种拥塞的措施
		- 发送方维护两个窗口：可变发送窗口和拥塞窗口，按两个窗口的最小值发送
		- 拥塞窗口按照慢启动（slow start）算法和拥塞避免（congestion avoidance）等算法变化
	- 慢启动算法与拥塞避免算法
		- 连接建立时拥塞窗口（congwin）初始值为该连接允许的最大发送段长MSS，阈值（threshold）为64K
		- 发出一个最大段长的TCP段，若收到正确确认，则拥塞窗口变为两个最大段长
		- 发出（ 拥塞窗口/最大段长）个最大长度的TCP段，若都得到确认，则拥塞窗口加倍
		- 重复上一步，直至发生丢包产生的超时事件，或拥塞窗口大于阈值
		- 当拥塞窗口大于阈值时，拥塞窗口开始线性增长，一个RTT(Round-Trip Time)周期增加一个最大段长，直至发生丢包产生的超时事件
		- 超时事件发生后，阈值设置为当前拥塞窗口大小的一半，拥塞窗口重新设置为一个最大段长
		- 执行慢启动算法
- UDP协议(User Datagram Protocol)
	- 为什么会有UDP
		- 不需要建立连接，延迟小 
		- 简单，没有连接状态 
		- 报文头小 
		- 没有拥塞控制，可以尽快的发送 
	- UDP协议的特点
		- 简单的传输协议 
		- “best effort”服务，UDP 报文可能会丢失、乱序
		- 无连接 
		- 收发双方不需要握手 
		- 每个UDP报文的处理都独立于其他报文
	- 经常用于流媒体应用 
		- 可以容忍丢包 
		- 速率敏感
	- UDP的其他应用范围
		- RIP，路由信息周期发送
		- DNS，避免TCP连接建立延迟
		- SNMP，当网络拥塞时，网管也要运行。网管信息带内（in-band）传输，用UDP比用可靠的、具有拥塞控制的TCP效果要好
		- 基于UDP的可靠传输：应用程序自己定义错误恢复
![UDP Header](https://github.com/DBullet/learn-git/blob/DBullet-patch-1/readme1/UDP.png)

## 应用层
- 网络应用程序：互相通信的分布式进程 
	- 在网络主机上的用户空间运行 
	- 互相交换消息 
	- 比如email、ftp和web
- 应用层协议 
	- 应用程序的一部分 
	- 定义应用程序之间交换的信息以及相应的动作 
	- 利用底层协议提供的服务 
- 客户/服务器模型
	- 客户/服务器模型是网络应用的基础
	- 客户/服务器分别指参与一次通信的两个应用实体，客户方主动地发起通信请求，服务器方被动地等待通信的建立，并提供服务
 	- 客户软件
		- 任何一个应用程序当需要进行远程访问时成为客户，这个应用程序也要完成一些本地的计算
		- 一般运行于用户的个人计算机上
		- 向服务器主动发起通信请求
		- 不需要特殊的硬件和复杂的操作系统
	- 服务器软件
		- 是专用的提供某种服务的特权程序，可以同时处理多个远程客户的请求
		- 一般在系统启动时被执行，并连续运行以处理多次会话
		- 被动地等待远程客户发起通信
		- 需要特殊的硬件和复杂的操作系统
	- 数据在客户和服务器之间是双向流动的，一般是客户发出请求，服务器给出响应
	- 服务器软件的并发性
		- 由于服务器软件要支持多个客户的同时访问，必须具备并发性
		- 服务器软件为每个新到的客户创建一个进程或线程来处理与这个客户的通信
	- 服务器软件的组成
		- 服务器软件一般分为两部分：一部分用于接受请求并创建新的进程或线程，另一部分用于处理实际的通信过程
- 域名服务
	- 产生原因
		- 32比特的IP地址难于记忆，符号地址便于记忆，因此需要一个完成二者之间相互转换的机制。比如用netlab.cs.tsinghua.edu.cn表示166.111.69.241
		- 当网络规模比较小时，例如ARPANET，每台主机只需查找一个文件（UNIX的host），该文件中列出了主机与IP地址的对应关系
		- 当网络规模很大时，上述方法就不适用了，因此产生了域名系统DNS（Domain Name System）
	- 域名系统是一个典型的客户/服务器交互系统
	- 域名系统是一个多层次的、基于域的命名系统，并使用分布式数据库实现这种命名机制
	- 操作过程
		- 当应用程序需要进行域名解析时，它成为域名系统的一个客户。它向本地域名服务器发出请求，请求以UDP段格式发出
		- 本地域名服务器找到对应的IP地址后，给出响应
		- 当本地域名服务器无法完成域名解析时，它临时变成其上级域名服务器的客户，继续解析，直到该域名解析完成
	- 互联网的顶级域名分为组织结构和地理结构两种。每个域对它下面的子域和机器进行管理
	- DNS中，域名是由“.”所分开的字符、数字串组成的，例如www.tsinghua.edu.cn
	- 域名是大小写无关的，“edu”和“EDU”相同。域名最长255个字符，每部分最长63个字符
